{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://127.0.0.1:8000/api'; // Replace with your API URL\n\nconst getToken = () => {\n  return localStorage.getItem('access_token');\n};\nconst getUserProfile = async () => {\n  const token = getToken();\n  const response = await axios.get(`${API_URL}/profile/`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return response.data;\n};\nconst login = async (username, password) => {\n  const response = await axios.post(`${API_URL}/token/`, {\n    username,\n    password\n  });\n  if (response.ok) {\n    localStorage.setItem('access_token', response.data.access);\n    localStorage.setItem('refresh_token', response.data.refresh);\n  }\n};\nconst handleLogout = async () => {\n  const refreshToken = localStorage.getItem('refresh_token');\n\n  //  inform the server\n  try {\n    await axios.post(`${API_URL}/api/logout/`, {\n      refresh_token: refreshToken\n    });\n  } catch (error) {\n    console.error('Error during logout: ', error);\n  }\n\n  // Remove tokens from localStorage\n  localStorage.removeItem('access_token');\n  localStorage.removeItem('refresh_token');\n\n  // Redirect to login page or home page\n  window.location.href = '/login'; // or any other route\n};\nexport default {\n  getUserProfile,\n  login,\n  handleLogout\n};","map":{"version":3,"names":["axios","API_URL","getToken","localStorage","getItem","getUserProfile","token","response","get","headers","Authorization","data","login","username","password","post","ok","setItem","access","refresh","handleLogout","refreshToken","refresh_token","error","console","removeItem","window","location","href"],"sources":["/Users/seidkrsic/Desktop/Sigma/SigmaFront/sigma/src/services/api.jsx"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://127.0.0.1:8000/api'; // Replace with your API URL\n\n\nconst getToken = () => {\n    return localStorage.getItem('access_token');\n  };\n  \n\nconst getUserProfile = async () => {\n    const token = getToken();\n    const response = await axios.get(`${API_URL}/profile/`, {\n        headers: {\n            Authorization: `Bearer ${token}`\n        }\n    });\n    return response.data;\n    };\n  \n\nconst login = async (username, password) => {\n    const response = await axios.post(`${API_URL}/token/`, {\n        username,\n        password\n    });\n\n    if (response.ok) { \n        localStorage.setItem('access_token', response.data.access);\n        localStorage.setItem('refresh_token', response.data.refresh);\n    } \n\n};\n      \n      \nconst handleLogout = async () => {\n\n    const refreshToken = localStorage.getItem('refresh_token');\n    \n    //  inform the server\n    try {\n        await axios.post(`${API_URL}/api/logout/`, { refresh_token: refreshToken });\n    } catch (error) {\n        console.error('Error during logout: ', error);\n    }\n\n    // Remove tokens from localStorage\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('refresh_token');\n    \n    // Redirect to login page or home page\n    window.location.href = '/login'; // or any other route\n};\n\n\n\nexport default {\n    getUserProfile, \n    login,\n    handleLogout, \n  };"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,2BAA2B,CAAC,CAAC;;AAG7C,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EACnB,OAAOC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;AAC7C,CAAC;AAGH,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;EAC/B,MAAMC,KAAK,GAAGJ,QAAQ,CAAC,CAAC;EACxB,MAAMK,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,GAAGP,OAAO,WAAW,EAAE;IACpDQ,OAAO,EAAE;MACLC,aAAa,EAAE,UAAUJ,KAAK;IAClC;EACJ,CAAC,CAAC;EACF,OAAOC,QAAQ,CAACI,IAAI;AACpB,CAAC;AAGL,MAAMC,KAAK,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,KAAK;EACxC,MAAMP,QAAQ,GAAG,MAAMP,KAAK,CAACe,IAAI,CAAC,GAAGd,OAAO,SAAS,EAAE;IACnDY,QAAQ;IACRC;EACJ,CAAC,CAAC;EAEF,IAAIP,QAAQ,CAACS,EAAE,EAAE;IACbb,YAAY,CAACc,OAAO,CAAC,cAAc,EAAEV,QAAQ,CAACI,IAAI,CAACO,MAAM,CAAC;IAC1Df,YAAY,CAACc,OAAO,CAAC,eAAe,EAAEV,QAAQ,CAACI,IAAI,CAACQ,OAAO,CAAC;EAChE;AAEJ,CAAC;AAGD,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;EAE7B,MAAMC,YAAY,GAAGlB,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;;EAE1D;EACA,IAAI;IACA,MAAMJ,KAAK,CAACe,IAAI,CAAC,GAAGd,OAAO,cAAc,EAAE;MAAEqB,aAAa,EAAED;IAAa,CAAC,CAAC;EAC/E,CAAC,CAAC,OAAOE,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;EACjD;;EAEA;EACApB,YAAY,CAACsB,UAAU,CAAC,cAAc,CAAC;EACvCtB,YAAY,CAACsB,UAAU,CAAC,eAAe,CAAC;;EAExC;EACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,CAAC,CAAC;AACrC,CAAC;AAID,eAAe;EACXvB,cAAc;EACdO,KAAK;EACLQ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}